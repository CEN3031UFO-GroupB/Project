<container>
  <div class="page-header row">
    <h1 class="col-md-8">Goals</h1>
    <button class="btn btn-default" style="float:right;margin-top: 25px;" ng-click="createGoal()">New Goal</button>
    <div class="clearfix"></div>
    <h5 style="font-style: italic; padding-left: 10px">{{diffDays}} days left to finish your goals</h5>
  </div>
  <div class="row" id="currentWeek">
    <div class="list-group col-md-4">
      <label>To Do</label>
      <div ng-repeat="goal in vm.goals"
           ng-if="(goal.status == 'Not Started')"
           class="list-group-item"
            style="margin-bottom: 5px; border-left: 5px solid #7e7877">
        <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      </div>
    </div>
    <div class="list-group col-md-4">
      <label>In Progress</label>
      <div ng-repeat="goal in vm.goals"
           ng-if="(goal.status == 'In Progress')"
           class="list-group-item"
           style="margin-bottom: 5px; border-left: 5px solid #2b5e7e">
        <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      </div>
    </div>
    <div class="list-group col-md-4">
      <label>Completed</label>
      <div ng-repeat="goal in vm.goals"
           ng-if="(goal.status == 'Completed') && ((goal.week_timestamp | date:'dd/MM/yyyy') == (monday | date:'dd/MM/yyyy'))"
           class="list-group-item"
           style="margin-bottom: 5px; border-left: 5px solid #0f9e02">
        <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      </div>
    </div>
  </div>

  <div class="alert alert-warning text-center" ng-if="vm.goals.$resolved && !vm.goals.length">
    No Goals yet, why don't you <a ui-sref="goals.create">create one</a>?
  </div>
</container>

<div class="list-group col-4">
  <label>To Do</label>
  <a ng-repeat="goal in vm.goals"
     ng-if="(goal.status == 'Not Started')"
     class="list-group-item row">
    <div class="col-md-5">
      <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      <h4 class="list-group-item-heading" style="display:inline">({{goal.category}})</h4>
      <small class="list-group-item-text" style="display:block">
        Created on
        <span ng-bind="goal.created_at | date:'mediumDate'"></span>
        by
        <span ng-if="goal.user" ng-bind="goal.user.displayName"></span>
        <span ng-if="!goal.user">Deleted User</span>
      </small>
    </div>
    <div class="col-md-3">
      {{goal.priority}}
    </div>
    <div class="col-md-2">
      <button class="btn btn-info" style="float:right" ui-sref="goals.view({ goalId: goal._id })">View</button>
    </div>
  </a>
</div>

<div class="list-group col-4">
  <label>In Progress</label>
  <a ng-repeat="goal in vm.goals"
     ng-if="(goal.status == 'In Progress')"
     class="list-group-item row">
    <div class="col-md-5">
      <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      <h4 class="list-group-item-heading" style="display:inline">({{goal.category}})</h4>
      <small class="list-group-item-text" style="display:block">
        Created on
        <span ng-bind="goal.created_at | date:'mediumDate'"></span>
        by
        <span ng-if="goal.user" ng-bind="goal.user.displayName"></span>
        <span ng-if="!goal.user">Deleted User</span>
      </small>
    </div>
    <div class="col-md-3">
      {{goal.priority}}
    </div>
    <div class="col-md-2">
      <button class="btn btn-info" style="float:right" ui-sref="goals.view({ goalId: goal._id })">View</button>
    </div>
    <div class="col-md-2">
      <button class="btn" style="float:right" ng-click="markGoalComplete(goal)">I'm Done!</button>
    </div>
  </a>
</div>

<div class="list-group col-4">
  <label>Completed</label>
  <a ng-repeat="goal in vm.goals"
     ng-if="(goal.status == 'Completed') && ((goal.week_timestamp | date:'dd/MM/yyyy') == (monday | date:'dd/MM/yyyy'))"
     class="list-group-item row">
    <div class="col-md-5">
      <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      <h4 class="list-group-item-heading" style="display:inline">({{goal.category}})</h4>
      <small class="list-group-item-text" style="display:block">
        Created on
        <span ng-bind="goal.created_at | date:'mediumDate'"></span>
        by
        <span ng-if="goal.user" ng-bind="goal.user.displayName"></span>
        <span ng-if="!goal.user">Deleted User</span>
      </small>
    </div>
    <div class="col-md-3">
      {{goal.priority}}
    </div>
    <div class="col-md-2">
      <button class="btn btn-info" style="float:right" ui-sref="goals.view({ goalId: goal._id })">View</button>
    </div>
    <div class="col-md-2">
      <button class="btn" style="float:right" ng-click="markGoalInProgress(goal)">I've started!</button>
    </div>
  </a>
</div>

<hr>

<div class="row">
  <h3>Previously Completed Goals</h3>
  <a ng-repeat="goal in vm.goals"
     ng-if="(goal.status == 'Completed') && (goal.week_timestamp | date:'dd/MM/yyyy') < (monday | date:'dd/MM/yyyy')"
     class="list-group-item row">
    <div class="col-md-5">
      <small class="list-group-item-text" style="display:block">
        Created on
        <span ng-bind="goal.created_at | date:'mediumDate'"></span>
        by
        <span ng-if="goal.user" ng-bind="goal.user.displayName"></span>
        <span ng-if="!goal.user">Deleted User</span>
      </small>
      <h4 class="list-group-item-heading" style="display:inline">{{goal.title}} </h4>
      <h4 class="list-group-item-heading" style="display:inline">({{goal.category}})</h4>
    </div>
    <div class="col-md-3">
      {{goal.priority}}
    </div>
    <div class="col-md-2">
      <button class="btn btn-info" style="float:right" ui-sref="goals.view({ goalId: goal._id })">View</button>
    </div>
    <div class="col-md-2">
      <h5 style="float:right; font-weight: bolder">{{goal.status}}</h5>
    </div>
  </a>
</div>
